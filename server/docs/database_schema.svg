<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 12.2.1 (20241206.2353)
 -->
<!-- Title: kommunikationszentrum_db Pages: 1 -->
<svg width="964pt" height="506pt"
 viewBox="0.00 0.00 964.00 505.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 501.5)">
<title>kommunikationszentrum_db</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-501.5 960,-501.5 960,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_mta</title>
<polygon fill="lightblue" stroke="black" points="232,-154.75 232,-489.5 518,-489.5 518,-154.75 232,-154.75"/>
<text text-anchor="middle" x="375" y="-472.2" font-family="Times,serif" font-size="14.00">MTA Processing</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_categories</title>
<polygon fill="lightgreen" stroke="black" points="526,-8 526,-284.25 678,-284.25 678,-8 526,-8"/>
<text text-anchor="middle" x="602" y="-266.95" font-family="Times,serif" font-size="14.00">Category Management</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_general</title>
<polygon fill="lightyellow" stroke="black" points="8,-348 8,-453.5 224,-453.5 224,-348 8,-348"/>
<text text-anchor="middle" x="116" y="-436.2" font-family="Times,serif" font-size="14.00">General</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_legend</title>
<polygon fill="white" stroke="black" points="782,-175.25 782,-439 948,-439 948,-175.25 782,-175.25"/>
<text text-anchor="middle" x="865" y="-421.7" font-family="Times,serif" font-size="14.00">Legend</text>
</g>
<!-- person -->
<g id="node1" class="node">
<title>person</title>
<polygon fill="none" stroke="black" points="16.25,-362.5 16.25,-414.5 87.75,-414.5 87.75,-362.5 16.25,-362.5"/>
<text text-anchor="middle" x="52" y="-401" font-family="Arial" font-size="10.00">Person</text>
<polyline fill="none" stroke="black" points="16.25,-394.5 87.75,-394.5"/>
<text text-anchor="start" x="24.25" y="-381" font-family="Arial" font-size="10.00">id: u64 (PK)</text>
<text text-anchor="start" x="24.25" y="-369" font-family="Arial" font-size="10.00">name: String</text>
</g>
<!-- webhook_log -->
<g id="node2" class="node">
<title>webhook_log</title>
<polygon fill="none" stroke="black" points="105.75,-356.5 105.75,-420.5 216.25,-420.5 216.25,-356.5 105.75,-356.5"/>
<text text-anchor="middle" x="161" y="-407" font-family="Arial" font-size="10.00">WebhookLog</text>
<polyline fill="none" stroke="black" points="105.75,-400.5 216.25,-400.5"/>
<text text-anchor="start" x="113.75" y="-387" font-family="Arial" font-size="10.00">id: u64 (PK, auto_inc)</text>
<text text-anchor="start" x="113.75" y="-375" font-family="Arial" font-size="10.00">payload: String</text>
<text text-anchor="start" x="113.75" y="-363" font-family="Arial" font-size="10.00">processed_at: i64</text>
</g>
<!-- mta_connection_log -->
<g id="node3" class="node">
<title>mta_connection_log</title>
<polygon fill="none" stroke="black" points="239.75,-338.5 239.75,-438.5 350.25,-438.5 350.25,-338.5 239.75,-338.5"/>
<text text-anchor="middle" x="295" y="-425" font-family="Arial" font-size="10.00">MtaConnectionLog</text>
<polyline fill="none" stroke="black" points="239.75,-418.5 350.25,-418.5"/>
<text text-anchor="start" x="247.75" y="-405" font-family="Arial" font-size="10.00">id: u64 (PK, auto_inc)</text>
<text text-anchor="start" x="247.75" y="-393" font-family="Arial" font-size="10.00">client_ip: String</text>
<text text-anchor="start" x="247.75" y="-381" font-family="Arial" font-size="10.00">stage: String</text>
<text text-anchor="start" x="247.75" y="-369" font-family="Arial" font-size="10.00">action: String</text>
<text text-anchor="start" x="247.75" y="-357" font-family="Arial" font-size="10.00">timestamp: i64</text>
<text text-anchor="start" x="247.75" y="-345" font-family="Arial" font-size="10.00">details: String</text>
</g>
<!-- blocked_ips -->
<g id="node5" class="node">
<title>blocked_ips</title>
<polygon fill="none" stroke="black" points="254,-163.25 254,-239.25 336,-239.25 336,-163.25 254,-163.25"/>
<text text-anchor="middle" x="295" y="-225.75" font-family="Arial" font-size="10.00">BlockedIp</text>
<polyline fill="none" stroke="black" points="254,-219.25 336,-219.25"/>
<text text-anchor="start" x="262" y="-205.75" font-family="Arial" font-size="10.00">ip: String (PK)</text>
<text text-anchor="start" x="262" y="-193.75" font-family="Arial" font-size="10.00">reason: String</text>
<text text-anchor="start" x="262" y="-181.75" font-family="Arial" font-size="10.00">blocked_at: i64</text>
<text text-anchor="start" x="262" y="-169.75" font-family="Arial" font-size="10.00">active: bool</text>
</g>
<!-- mta_connection_log&#45;&gt;blocked_ips -->
<g id="edge2" class="edge">
<title>mta_connection_log&#45;&gt;blocked_ips</title>
<path fill="none" stroke="red" stroke-dasharray="1,5" d="M295,-338.34C295,-311.36 295,-278.01 295,-251.08"/>
<polygon fill="red" stroke="red" points="298.5,-251.1 295,-241.1 291.5,-251.1 298.5,-251.1"/>
<text text-anchor="middle" x="327.25" y="-294.4" font-family="Arial" font-size="8.00">checks IP blocking</text>
</g>
<!-- mta_message_log -->
<g id="node4" class="node">
<title>mta_message_log</title>
<polygon fill="none" stroke="black" points="368,-320.5 368,-456.5 510,-456.5 510,-320.5 368,-320.5"/>
<text text-anchor="middle" x="439" y="-443" font-family="Arial" font-size="10.00">MtaMessageLog</text>
<polyline fill="none" stroke="black" points="368,-436.5 510,-436.5"/>
<text text-anchor="start" x="376" y="-423" font-family="Arial" font-size="10.00">id: u64 (PK, auto_inc)</text>
<text text-anchor="start" x="376" y="-411" font-family="Arial" font-size="10.00">from_address: String</text>
<text text-anchor="start" x="376" y="-399" font-family="Arial" font-size="10.00">to_addresses: String (JSON)</text>
<text text-anchor="start" x="376" y="-387" font-family="Arial" font-size="10.00">subject: String</text>
<text text-anchor="start" x="376" y="-375" font-family="Arial" font-size="10.00">message_size: u64</text>
<text text-anchor="start" x="376" y="-363" font-family="Arial" font-size="10.00">stage: String</text>
<text text-anchor="start" x="376" y="-351" font-family="Arial" font-size="10.00">action: String</text>
<text text-anchor="start" x="376" y="-339" font-family="Arial" font-size="10.00">timestamp: i64</text>
<text text-anchor="start" x="376" y="-327" font-family="Arial" font-size="10.00">queue_id: Option&lt;String&gt;</text>
</g>
<!-- message_categories -->
<g id="node6" class="node">
<title>message_categories</title>
<polygon fill="none" stroke="black" points="555.75,-16.5 555.75,-104.5 666.25,-104.5 666.25,-16.5 555.75,-16.5"/>
<text text-anchor="middle" x="611" y="-91" font-family="Arial" font-size="10.00">MessageCategory</text>
<polyline fill="none" stroke="black" points="555.75,-84.5 666.25,-84.5"/>
<text text-anchor="start" x="563.75" y="-71" font-family="Arial" font-size="10.00">id: u64 (PK, auto_inc)</text>
<text text-anchor="start" x="563.75" y="-59" font-family="Arial" font-size="10.00">name: String</text>
<text text-anchor="start" x="563.75" y="-47" font-family="Arial" font-size="10.00">email_address: String</text>
<text text-anchor="start" x="563.75" y="-35" font-family="Arial" font-size="10.00">description: String</text>
<text text-anchor="start" x="563.75" y="-23" font-family="Arial" font-size="10.00">active: bool</text>
</g>
<!-- mta_message_log&#45;&gt;message_categories -->
<g id="edge3" class="edge">
<title>mta_message_log&#45;&gt;message_categories</title>
<path fill="none" stroke="green" stroke-dasharray="1,5" d="M510.26,-378.05C566.63,-366.41 641.83,-340.7 679,-284.25 718.46,-224.32 707.08,-185.02 671,-123 669.16,-119.84 667.13,-116.72 664.95,-113.67"/>
<polygon fill="green" stroke="green" points="667.84,-111.69 658.96,-105.91 662.3,-115.96 667.84,-111.69"/>
<text text-anchor="middle" x="737.16" y="-198.53" font-family="Arial" font-size="8.00">validates recipients</text>
</g>
<!-- subscriptions -->
<g id="node7" class="node">
<title>subscriptions</title>
<polygon fill="none" stroke="black" points="534.38,-151.25 534.38,-251.25 669.62,-251.25 669.62,-151.25 534.38,-151.25"/>
<text text-anchor="middle" x="602" y="-237.75" font-family="Arial" font-size="10.00">Subscription</text>
<polyline fill="none" stroke="black" points="534.38,-231.25 669.62,-231.25"/>
<text text-anchor="start" x="542.38" y="-217.75" font-family="Arial" font-size="10.00">id: u64 (PK, auto_inc)</text>
<text text-anchor="start" x="542.38" y="-205.75" font-family="Arial" font-size="10.00">subscriber_account_id: u64</text>
<text text-anchor="start" x="542.38" y="-193.75" font-family="Arial" font-size="10.00">subscriber_email: String</text>
<text text-anchor="start" x="542.38" y="-181.75" font-family="Arial" font-size="10.00">category_id: u64 (FK)</text>
<text text-anchor="start" x="542.38" y="-169.75" font-family="Arial" font-size="10.00">subscribed_at: i64</text>
<text text-anchor="start" x="542.38" y="-157.75" font-family="Arial" font-size="10.00">active: bool</text>
</g>
<!-- mta_message_log&#45;&gt;subscriptions -->
<g id="edge4" class="edge">
<title>mta_message_log&#45;&gt;subscriptions</title>
<path fill="none" stroke="green" stroke-dasharray="1,5" d="M498.31,-320.1C515.6,-300.45 534.32,-279.16 551.05,-260.16"/>
<polygon fill="green" stroke="green" points="553.6,-262.56 557.58,-252.74 548.34,-257.93 553.6,-262.56"/>
<text text-anchor="middle" x="556.5" y="-294.4" font-family="Arial" font-size="8.00">checks subscriptions</text>
</g>
<!-- subscriptions&#45;&gt;message_categories -->
<g id="edge1" class="edge">
<title>subscriptions&#45;&gt;message_categories</title>
<path fill="none" stroke="blue" d="M605.2,-150.94C605.93,-139.61 606.72,-127.49 607.47,-115.96"/>
<polygon fill="blue" stroke="blue" points="610.95,-116.38 608.1,-106.17 603.96,-115.92 610.95,-116.38"/>
<text text-anchor="middle" x="636.77" y="-125.15" font-family="Arial" font-size="8.00">category_id â†’ id</text>
</g>
<!-- legend_fk -->
<g id="node8" class="node">
<title>legend_fk</title>
<text text-anchor="middle" x="855" y="-385" font-family="Arial" font-size="10.00">Foreign Key</text>
</g>
<!-- legend_check -->
<g id="node9" class="node">
<title>legend_check</title>
<text text-anchor="middle" x="861" y="-197.75" font-family="Arial" font-size="10.00">Validation Check</text>
</g>
<!-- legend_fk&#45;&gt;legend_check -->
<g id="edge5" class="edge">
<title>legend_fk&#45;&gt;legend_check</title>
<path fill="none" stroke="blue" d="M838.34,-370.72C822.1,-352.26 800.91,-321.36 808.75,-292.25 815.03,-268.92 829.01,-245.4 840.93,-228.26"/>
<polygon fill="blue" stroke="blue" points="843.75,-230.34 846.75,-220.18 838.07,-226.24 843.75,-230.34"/>
<text text-anchor="middle" x="836.88" y="-294.4" font-family="Arial" font-size="8.00">FK Relationship</text>
</g>
<!-- legend_check&#45;&gt;legend_fk -->
<g id="edge6" class="edge">
<title>legend_check&#45;&gt;legend_fk</title>
<path fill="none" stroke="green" stroke-dasharray="1,5" d="M862.69,-219.2C864.44,-239.06 866.69,-272.93 865,-302 863.88,-321.21 861.36,-342.72 859.13,-359.36"/>
<polygon fill="green" stroke="green" points="855.69,-358.63 857.79,-369.02 862.63,-359.6 855.69,-358.63"/>
<text text-anchor="middle" x="891.99" y="-294.4" font-family="Arial" font-size="8.00">Data Validation</text>
</g>
</g>
</svg>
